<div [class.fullscreen-container]="isFullscreen" class="drawing-container">
      <!-- Toolbar -->
      <div class="toolbar">
        <div class="toolbar-content">
          <!-- Tools -->
          <div class="tool-group">
            <button 
              (click)="setTool('pen')" 
              [class.active]="tool === 'pen'"
              class="tool-btn"
              title="Pen">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
              </svg>
            </button>
            
            <button 
              (click)="setTool('line')" 
              [class.active]="tool === 'line'"
              class="tool-btn"
              title="Line">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="3" y1="21" x2="21" y2="3" stroke-width="2"></line>
              </svg>
            </button>
            
            <button 
              (click)="setTool('rectangle')" 
              [class.active]="tool === 'rectangle'"
              class="tool-btn"
              title="Rectangle">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="3" width="18" height="18" stroke-width="2" rx="2"></rect>
              </svg>
            </button>
            
            <button 
              (click)="setTool('circle')" 
              [class.active]="tool === 'circle'"
              class="tool-btn"
              title="Circle">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="9" stroke-width="2"></circle>
              </svg>
            </button>

            <button 
              (click)="setTool('triangle')" 
              [class.active]="tool === 'triangle'"
              class="tool-btn"
              title="Triangle">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2L2 22h20L12 2z"></path>
              </svg>
            </button>

            <button 
              (click)="setTool('star')" 
              [class.active]="tool === 'star'"
              class="tool-btn"
              title="Star">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path>
              </svg>
            </button>

            <button 
              (click)="setTool('arrow')" 
              [class.active]="tool === 'arrow'"
              class="tool-btn"
              title="Arrow">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </button>

            <button 
              (click)="setTool('pentagon')" 
              [class.active]="tool === 'pentagon'"
              class="tool-btn"
              title="Pentagon">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2l7.5 5.5v11L12 22l-7.5-3.5v-11L12 2z"></path>
              </svg>
            </button>
            
            <button 
              (click)="setTool('fill')" 
              [class.active]="tool === 'fill'"
              class="tool-btn"
              title="Fill">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
              </svg>
            </button>
            
            <button 
              (click)="setTool('eraser')" 
              [class.active]="tool === 'eraser'"
              class="tool-btn"
              title="Eraser">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
            </button>
          </div>

          <!-- Stroke Colors -->
          <div class="color-section">
            <span class="label">Stroke:</span>
            <div class="color-palette">
              <div *ngFor="let c of colors" 
                   (click)="color = c"
                   [style.background-color]="c"
                   [class.selected]="color === c"
                   class="color-swatch">
              </div>
                            <input type="color" [(ngModel)]="color" class="w-8 h-6 cursor-pointer rounded border-2 border-gray-300">

            </div>
          </div>

          <!-- Fill Color -->
          <div class="color-section">
            <span class="label">Fill:</span>
            <div class="color-palette">
              <div *ngFor="let c of colors" 
                   (click)="fillColor = c"
                   [style.background-color]="c"
                   [class.selected]="fillColor === c"
                   class="color-swatch">
              </div>
                            <input type="color" [(ngModel)]="fillColor" class="w-8 h-6 cursor-pointer rounded border-2 border-gray-300">

            </div>
          </div>

          <!-- Line Width -->
          <div class="size-control">
            <span class="label">Size:</span>
            <input type="range" [(ngModel)]="lineWidth" min="1" max="20" class="slider">
            <span class="size-value">{{lineWidth}}px</span>
          </div>

          <!-- Actions -->
          <div class="action-group">
            <button 
              (click)="undo()"
              [disabled]="historyStep <= 0"
              class="action-btn"
              title="Undo">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path>
              </svg>
            </button>
            
            <button 
              (click)="redo()"
              [disabled]="historyStep >= history.length - 1"
              class="action-btn"
              title="Redo">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"></path>
              </svg>
            </button>
            
            <button 
              (click)="clearCanvas()"
              class="action-btn clear-btn"
              title="Clear">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
              </svg>
            </button>
            
            <button 
              (click)="downloadCanvas()"
              class="action-btn download-btn"
              title="Download">
              <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
              </svg>
            </button>
            
            <button 
              (click)="toggleFullscreen()"
              class="action-btn fullscreen-btn"
              [title]="isFullscreen ? 'Exit Fullscreen' : 'Fullscreen'">
              <svg *ngIf="!isFullscreen" class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"></path>
              </svg>
              <svg *ngIf="isFullscreen" class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Canvas -->
      <div class="canvas-wrapper">
        <canvas 
          #canvas
          (mousedown)="startDrawing($event)"
          (mousemove)="draw($event)"
          (mouseup)="stopDrawing()"
          (mouseleave)="stopDrawing()"
          (touchstart)="startDrawing($event)"
          (touchmove)="draw($event)"
          (touchend)="stopDrawing()"
          class="canvas">
        </canvas>
      </div>
    </div>