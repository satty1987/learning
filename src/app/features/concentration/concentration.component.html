<div class="concentration-screen">
  <button class="back-btn" (click)="goBack()">â† Back to Menu</button>

  <div class="game-header">
    <h1 class="title">ğŸƒ Concentration Game ğŸƒ</h1>
    <p class="subtitle">Find all the matching pairs!</p>
  </div>

  <!-- Difficulty Selection -->
  <div class="difficulty-screen" *ngIf="!gameStarted">
    <div class="difficulty-container">
      <h2 class="select-title">Choose Difficulty</h2>
      
      <button class="difficulty-btn easy" (click)="selectDifficulty('easy')">
        <span class="diff-emoji">ğŸŸ¢</span>
        <span class="diff-name">Easy</span>
        <span class="diff-info">4 Pairs (8 Cards)</span>
      </button>

      <button class="difficulty-btn medium" (click)="selectDifficulty('medium')">
        <span class="diff-emoji">ğŸŸ¡</span>
        <span class="diff-name">Medium</span>
        <span class="diff-info">6 Pairs (12 Cards)</span>
      </button>

      <button class="difficulty-btn hard" (click)="selectDifficulty('hard')">
        <span class="diff-emoji">ğŸ”´</span>
        <span class="diff-name">Hard</span>
        <span class="diff-info">8 Pairs (16 Cards)</span>
      </button>
    </div>
  </div>

  <!-- Game Board -->
  <div class="game-board" *ngIf="gameStarted && !gameCompleted">
    <div class="game-stats">
      <div class="stat-item">
        <span class="stat-icon">â±ï¸</span>
        <span class="stat-value">{{ formatTime(timer) }}</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">ğŸ‘†</span>
        <span class="stat-value">{{ moves }} Moves</span>
      </div>
      <div class="stat-item">
        <span class="stat-icon">âœ…</span>
        <span class="stat-value">{{ matches }}/{{ cards.length / 2 }}</span>
      </div>
    </div>

    <div class="cards-container" [ngClass]="gridClass">
      <div 
        *ngFor="let card of cards"
        class="card-wrapper"
        (click)="onCardClick(card)">
        <div class="card" 
             [class.flipped]="card.flipped || card.matched"
             [class.matched]="card.matched">
          <div class="card-front">
            <span class="card-question">?</span>
          </div>
          <div class="card-back">
            <span class="card-emoji">{{ card.emoji }}</span>
          </div>
        </div>
      </div>
    </div>

    <button class="reset-btn" (click)="resetGame()">
      ğŸ”„ New Game
    </button>
  </div>

  <!-- Completion Screen -->
  <div class="completion-screen" *ngIf="gameCompleted">
    <div class="completion-box">
      <h2 class="completion-title">ğŸ‰ Congratulations! ğŸ‰</h2>
      <div class="completion-stats">
        <p class="stat-line">â±ï¸ Time: <strong>{{ formatTime(timer) }}</strong></p>
        <p class="stat-line">ğŸ‘† Moves: <strong>{{ moves }}</strong></p>
        <p class="stat-line">â­ Efficiency: <strong>{{ ((cards.length / 2) / moves * 100).toFixed(0) }}%</strong></p>
      </div>
      <div class="completion-buttons">
        <button class="completion-btn play" (click)="startGame()">
          ğŸ”„ Play Again
        </button>
        <button class="completion-btn difficulty" (click)="resetGame()">
          ğŸ“Š Change Difficulty
        </button>
      </div>
    </div>
  </div>
</div>