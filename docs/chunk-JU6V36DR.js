import{a as X,b as J,c as K,e as Z,h as $}from"./chunk-7ICLEMMO.js";import{A as m,B as g,Ha as q,Ia as Q,Ja as U,M as d,P as j,Q as z,Sa as Y,T as E,ca as P,da as o,ea as c,fa as p,ia as O,ka as h,ma as V,na as G,oa as W,pa as A,qa as H,ra as w,t as F,ta as S,va as N,xa as B,y as a,ya as R,z as l,za as L}from"./chunk-NHMTXIBX.js";var ie=["canvas"];function oe(u,n){if(u&1){let t=O();o(0,"div",46),h("click",function(){let i=a(t).$implicit,r=V();return l(r.color=i)}),c()}if(u&2){let t=n.$implicit,e=V();H("background-color",t),w("selected",e.color===t)}}function re(u,n){if(u&1){let t=O();o(0,"div",46),h("click",function(){let i=a(t).$implicit,r=V();return l(r.fillColor=i)}),c()}if(u&2){let t=n.$implicit,e=V();H("background-color",t),w("selected",e.fillColor===t)}}function se(u,n){u&1&&(m(),o(0,"svg",6),p(1,"path",47),c())}function ae(u,n){u&1&&(m(),o(0,"svg",6),p(1,"path",48),c())}var D=class u{canvasRef;ctx;isDrawing=!1;startPos=null;tempCanvas=null;tool="pen";color="#000000";fillColor="#ff0000";lineWidth=2;isFullscreen=!1;history=[];historyStep=-1;colors=["#000000","#ff0000","#e20074","#ffff00","#00ff00"];ngAfterViewInit(){let n=this.canvasRef.nativeElement;this.ctx=n.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas())}resizeCanvas(){let n=this.canvasRef.nativeElement,t=this.ctx.getImageData(0,0,n.width,n.height);n.width=n.offsetWidth,n.height=n.offsetHeight,this.ctx.fillStyle="white",this.ctx.fillRect(0,0,n.width,n.height),this.history.length===0?this.saveToHistory():t.width>0&&this.ctx.putImageData(t,0,0)}setTool(n){this.tool=n}getMousePos(n){let e=this.canvasRef.nativeElement.getBoundingClientRect();return n instanceof MouseEvent?{x:n.clientX-e.left,y:n.clientY-e.top}:{x:n.touches[0].clientX-e.left,y:n.touches[0].clientY-e.top}}startDrawing(n){n.preventDefault();let t=this.getMousePos(n);if(this.tool==="fill"){this.floodFill(t.x,t.y,this.fillColor);return}if(this.isDrawing=!0,this.startPos=t,this.tool==="pen"||this.tool==="eraser")this.ctx.beginPath(),this.ctx.moveTo(t.x,t.y);else{let e=this.canvasRef.nativeElement;this.tempCanvas=document.createElement("canvas"),this.tempCanvas.width=e.width,this.tempCanvas.height=e.height,this.tempCanvas.getContext("2d").drawImage(e,0,0)}}draw(n){if(!this.isDrawing)return;n.preventDefault();let t=this.getMousePos(n);if(this.ctx.strokeStyle=this.tool==="eraser"?"white":this.color,this.ctx.fillStyle=this.fillColor,this.ctx.lineWidth=this.tool==="eraser"?this.lineWidth*3:this.lineWidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.tool==="pen"||this.tool==="eraser")this.ctx.lineTo(t.x,t.y),this.ctx.stroke();else if(this.tempCanvas&&this.startPos){let e=this.canvasRef.nativeElement;if(this.ctx.clearRect(0,0,e.width,e.height),this.ctx.drawImage(this.tempCanvas,0,0),this.ctx.beginPath(),this.tool==="line")this.ctx.moveTo(this.startPos.x,this.startPos.y),this.ctx.lineTo(t.x,t.y),this.ctx.stroke();else if(this.tool==="rectangle"){let i=t.x-this.startPos.x,r=t.y-this.startPos.y;this.ctx.fillRect(this.startPos.x,this.startPos.y,i,r),this.ctx.strokeRect(this.startPos.x,this.startPos.y,i,r)}else if(this.tool==="circle"){let i=Math.sqrt(Math.pow(t.x-this.startPos.x,2)+Math.pow(t.y-this.startPos.y,2));this.ctx.arc(this.startPos.x,this.startPos.y,i,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke()}else if(this.tool==="triangle"){let i=t.y-this.startPos.y,r=t.x-this.startPos.x;this.ctx.moveTo(this.startPos.x+r/2,this.startPos.y),this.ctx.lineTo(this.startPos.x,t.y),this.ctx.lineTo(t.x,t.y),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}else this.tool==="star"?this.drawStar(this.startPos.x,this.startPos.y,t.x,t.y):this.tool==="arrow"?this.drawArrow(this.startPos.x,this.startPos.y,t.x,t.y):this.tool==="pentagon"&&this.drawPentagon(this.startPos.x,this.startPos.y,t.x,t.y)}}drawStar(n,t,e,i){let r=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),s=5,v=r,_=r/2,f=Math.PI/2*3,M=n,b=t,x=Math.PI/s;this.ctx.beginPath(),this.ctx.moveTo(n,t-v);for(let T=0;T<s;T++)M=n+Math.cos(f)*v,b=t+Math.sin(f)*v,this.ctx.lineTo(M,b),f+=x,M=n+Math.cos(f)*_,b=t+Math.sin(f)*_,this.ctx.lineTo(M,b),f+=x;this.ctx.lineTo(n,t-v),this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}drawArrow(n,t,e,i){let s=Math.atan2(i-t,e-n);this.ctx.moveTo(n,t),this.ctx.lineTo(e,i),this.ctx.lineTo(e-20*Math.cos(s-Math.PI/6),i-20*Math.sin(s-Math.PI/6)),this.ctx.moveTo(e,i),this.ctx.lineTo(e-20*Math.cos(s+Math.PI/6),i-20*Math.sin(s+Math.PI/6)),this.ctx.stroke()}drawPentagon(n,t,e,i){let r=Math.sqrt(Math.pow(e-n,2)+Math.pow(i-t,2)),s=5,v=Math.PI*2/s;this.ctx.beginPath();for(let _=0;_<=s;_++){let f=n+r*Math.cos(v*_-Math.PI/2),M=t+r*Math.sin(v*_-Math.PI/2);_===0?this.ctx.moveTo(f,M):this.ctx.lineTo(f,M)}this.ctx.closePath(),this.ctx.fill(),this.ctx.stroke()}stopDrawing(){this.isDrawing&&(this.isDrawing=!1,this.saveToHistory()),this.tempCanvas=null}floodFill(n,t,e){let i=this.canvasRef.nativeElement,r=this.ctx.getImageData(0,0,i.width,i.height),s=r.data,v=(Math.floor(t)*i.width+Math.floor(n))*4,_=s[v],f=s[v+1],M=s[v+2],b={r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)};if(_===b.r&&f===b.g&&M===b.b)return;let x=[[Math.floor(n),Math.floor(t)]],T=new Set;for(;x.length>0;){let te=x.pop(),[C,k]=te,I=`${C},${k}`;if(T.has(I)||C<0||C>=i.width||k<0||k>=i.height)continue;let y=(k*i.width+C)*4;s[y]===_&&s[y+1]===f&&s[y+2]===M&&(s[y]=b.r,s[y+1]=b.g,s[y+2]=b.b,s[y+3]=255,T.add(I),x.push([C+1,k],[C-1,k],[C,k+1],[C,k-1]))}this.ctx.putImageData(r,0,0),this.saveToHistory()}saveToHistory(){let t=this.canvasRef.nativeElement.toDataURL(),e=this.history.slice(0,this.historyStep+1);e.push(t),this.history=e,this.historyStep=e.length-1}undo(){this.historyStep>0&&(this.historyStep--,this.loadFromHistory(this.historyStep))}redo(){this.historyStep<this.history.length-1&&(this.historyStep++,this.loadFromHistory(this.historyStep))}loadFromHistory(n){let t=this.canvasRef.nativeElement,e=new Image;e.src=this.history[n],e.onload=()=>{this.ctx.clearRect(0,0,t.width,t.height),this.ctx.drawImage(e,0,0)}}clearCanvas(){let n=this.canvasRef.nativeElement;this.ctx.fillStyle="white",this.ctx.fillRect(0,0,n.width,n.height),this.saveToHistory()}downloadCanvas(){let n=this.canvasRef.nativeElement,t=document.createElement("a");t.download="drawing.png",t.href=n.toDataURL(),t.click()}toggleFullscreen(){this.isFullscreen=!this.isFullscreen,setTimeout(()=>this.resizeCanvas(),100)}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=j({type:u,selectors:[["app-drawing-board"]],viewQuery:function(t,e){if(t&1&&G(ie,5),t&2){let i;W(i=A())&&(e.canvasRef=i.first)}},decls:71,vars:33,consts:[["canvas",""],[1,"drawing-container"],[1,"toolbar"],[1,"toolbar-content"],[1,"tool-group"],["title","Pen",1,"tool-btn",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"icon"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],["title","Line",1,"tool-btn",3,"click"],["x1","3","y1","21","x2","21","y2","3","stroke-width","2"],["title","Rectangle",1,"tool-btn",3,"click"],["x","3","y","3","width","18","height","18","stroke-width","2","rx","2"],["title","Circle",1,"tool-btn",3,"click"],["cx","12","cy","12","r","9","stroke-width","2"],["title","Triangle",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 2L2 22h20L12 2z"],["title","Star",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"],["title","Arrow",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 8l4 4m0 0l-4 4m4-4H3"],["title","Pentagon",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 2l7.5 5.5v11L12 22l-7.5-3.5v-11L12 2z"],["title","Fill",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["title","Eraser",1,"tool-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"color-section"],[1,"label"],[1,"color-palette"],["class","color-swatch",3,"background-color","selected","click",4,"ngFor","ngForOf"],["type","color",1,"w-8","h-6","cursor-pointer","rounded","border-2","border-gray-300",3,"ngModelChange","ngModel"],[1,"size-control"],["type","range","min","1","max","20",1,"slider",3,"ngModelChange","ngModel"],[1,"size-value"],[1,"action-group"],["title","Undo",1,"action-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"],["title","Redo",1,"action-btn",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"],["title","Clear",1,"action-btn","clear-btn",3,"click"],["title","Download",1,"action-btn","download-btn",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"],[1,"action-btn","fullscreen-btn",3,"click","title"],["class","icon","fill","none","stroke","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"canvas-wrapper"],[1,"canvas",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend"],[1,"color-swatch",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"]],template:function(t,e){if(t&1){let i=O();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"button",5),h("click",function(){return a(i),l(e.setTool("pen"))}),m(),o(5,"svg",6),p(6,"path",7),c()(),g(),o(7,"button",8),h("click",function(){return a(i),l(e.setTool("line"))}),m(),o(8,"svg",6),p(9,"line",9),c()(),g(),o(10,"button",10),h("click",function(){return a(i),l(e.setTool("rectangle"))}),m(),o(11,"svg",6),p(12,"rect",11),c()(),g(),o(13,"button",12),h("click",function(){return a(i),l(e.setTool("circle"))}),m(),o(14,"svg",6),p(15,"circle",13),c()(),g(),o(16,"button",14),h("click",function(){return a(i),l(e.setTool("triangle"))}),m(),o(17,"svg",6),p(18,"path",15),c()(),g(),o(19,"button",16),h("click",function(){return a(i),l(e.setTool("star"))}),m(),o(20,"svg",6),p(21,"path",17),c()(),g(),o(22,"button",18),h("click",function(){return a(i),l(e.setTool("arrow"))}),m(),o(23,"svg",6),p(24,"path",19),c()(),g(),o(25,"button",20),h("click",function(){return a(i),l(e.setTool("pentagon"))}),m(),o(26,"svg",6),p(27,"path",21),c()(),g(),o(28,"button",22),h("click",function(){return a(i),l(e.setTool("fill"))}),m(),o(29,"svg",6),p(30,"path",23),c()(),g(),o(31,"button",24),h("click",function(){return a(i),l(e.setTool("eraser"))}),m(),o(32,"svg",6),p(33,"path",25),c()()(),g(),o(34,"div",26)(35,"span",27),S(36,"Stroke:"),c(),o(37,"div",28),E(38,oe,1,4,"div",29),o(39,"input",30),L("ngModelChange",function(s){return a(i),R(e.color,s)||(e.color=s),l(s)}),c()()(),o(40,"div",26)(41,"span",27),S(42,"Fill:"),c(),o(43,"div",28),E(44,re,1,4,"div",29),o(45,"input",30),L("ngModelChange",function(s){return a(i),R(e.fillColor,s)||(e.fillColor=s),l(s)}),c()()(),o(46,"div",31)(47,"span",27),S(48,"Size:"),c(),o(49,"input",32),L("ngModelChange",function(s){return a(i),R(e.lineWidth,s)||(e.lineWidth=s),l(s)}),c(),o(50,"span",33),S(51),c()(),o(52,"div",34)(53,"button",35),h("click",function(){return a(i),l(e.undo())}),m(),o(54,"svg",6),p(55,"path",36),c()(),g(),o(56,"button",37),h("click",function(){return a(i),l(e.redo())}),m(),o(57,"svg",6),p(58,"path",38),c()(),g(),o(59,"button",39),h("click",function(){return a(i),l(e.clearCanvas())}),m(),o(60,"svg",6),p(61,"path",25),c()(),g(),o(62,"button",40),h("click",function(){return a(i),l(e.downloadCanvas())}),m(),o(63,"svg",6),p(64,"path",41),c()(),g(),o(65,"button",42),h("click",function(){return a(i),l(e.toggleFullscreen())}),E(66,se,2,0,"svg",43)(67,ae,2,0,"svg",43),c()()()(),o(68,"div",44)(69,"canvas",45,0),h("mousedown",function(s){return a(i),l(e.startDrawing(s))})("mousemove",function(s){return a(i),l(e.draw(s))})("mouseup",function(){return a(i),l(e.stopDrawing())})("mouseleave",function(){return a(i),l(e.stopDrawing())})("touchstart",function(s){return a(i),l(e.startDrawing(s))})("touchmove",function(s){return a(i),l(e.draw(s))})("touchend",function(){return a(i),l(e.stopDrawing())}),c()()()}t&2&&(w("fullscreen-container",e.isFullscreen),d(4),w("active",e.tool==="pen"),d(3),w("active",e.tool==="line"),d(3),w("active",e.tool==="rectangle"),d(3),w("active",e.tool==="circle"),d(3),w("active",e.tool==="triangle"),d(3),w("active",e.tool==="star"),d(3),w("active",e.tool==="arrow"),d(3),w("active",e.tool==="pentagon"),d(3),w("active",e.tool==="fill"),d(3),w("active",e.tool==="eraser"),d(7),P("ngForOf",e.colors),d(),B("ngModel",e.color),d(5),P("ngForOf",e.colors),d(),B("ngModel",e.fillColor),d(4),B("ngModel",e.lineWidth),d(2),N("",e.lineWidth,"px"),d(2),P("disabled",e.historyStep<=0),d(3),P("disabled",e.historyStep>=e.history.length-1),d(9),P("title",e.isFullscreen?"Exit Fullscreen":"Fullscreen"),d(),P("ngIf",!e.isFullscreen),d(),P("ngIf",e.isFullscreen))},dependencies:[U,q,Q,$,X,Z,J,K],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100vh}.drawing-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:#f3f4f6}.fullscreen-container[_ngcontent-%COMP%]{position:fixed;inset:0;z-index:9999}.toolbar[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 4px 6px -1px #0000001a;padding:1rem}.toolbar-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;gap:1.5rem}.tool-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.tool-btn[_ngcontent-%COMP%]{padding:.5rem;border-radius:.375rem;background-color:#e5e7eb;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.tool-btn[_ngcontent-%COMP%]:hover{background-color:#d1d5db;transform:translateY(-1px)}.tool-btn.active[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.icon[_ngcontent-%COMP%]{width:1.25rem;height:1.25rem}.color-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#374151}.color-palette[_ngcontent-%COMP%]{display:flex;gap:.25rem;align-items:center}.color-swatch[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;border-radius:.25rem;cursor:pointer;border:2px solid #d1d5db;transition:all .2s}.color-swatch[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 2px 4px #0000001a}.color-swatch.selected[_ngcontent-%COMP%]{border-color:#3b82f6;transform:scale(1.1);box-shadow:0 0 0 3px #3b82f633}.size-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.slider[_ngcontent-%COMP%]{width:6rem;cursor:pointer;accent-color:#3b82f6}.size-value[_ngcontent-%COMP%]{font-size:.875rem;color:#374151;min-width:2.5rem}.action-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}.action-btn[_ngcontent-%COMP%]{padding:.5rem;border-radius:.375rem;background-color:#e5e7eb;border:none;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#d1d5db}.clear-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#dc2626}.download-btn[_ngcontent-%COMP%]{background-color:#10b981;color:#fff}.download-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#059669}.fullscreen-btn[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.fullscreen-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#2563eb}.canvas-wrapper[_ngcontent-%COMP%]{flex:1;padding:1rem;overflow:hidden;display:flex;align-items:center;justify-content:center}.canvas[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;border-radius:.5rem;box-shadow:0 10px 15px -3px #0000001a;cursor:crosshair;touch-action:none}@media(max-width:768px){.toolbar-content[_ngcontent-%COMP%]{gap:1rem}.color-section[_ngcontent-%COMP%], .size-control[_ngcontent-%COMP%]{flex-basis:100%}.action-group[_ngcontent-%COMP%]{margin-left:0;flex-basis:100%;justify-content:flex-end}.slider[_ngcontent-%COMP%]{flex:1}}@media(max-width:480px){.toolbar[_ngcontent-%COMP%]{padding:.75rem}.toolbar-content[_ngcontent-%COMP%]{gap:.75rem}.tool-btn[_ngcontent-%COMP%], .action-btn[_ngcontent-%COMP%]{padding:.375rem}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem}.canvas-wrapper[_ngcontent-%COMP%]{padding:.5rem}}"]})};var le=[{path:"",component:D}],ee=class u{static \u0275fac=function(t){return new(t||u)};static \u0275mod=z({type:u});static \u0275inj=F({imports:[Y.forChild(le),D]})};export{ee as DrawingBoardModule};
