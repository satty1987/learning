import{Ia as w,Ja as S,Ka as R,N as s,P as k,Q as M,R as P,Sa as E,U as g,Ua as N,da as l,ea as n,fa as i,ga as v,ja as y,la as d,na as p,ra as O,sa as x,t as C,ua as r,va as u,wa as h,y as b,z as _}from"./chunk-YQQ3A4B2.js";function j(a,o){if(a&1){let t=y();n(0,"button",24),d("click",function(){let c=b(t).$implicit,m=p();return _(m.selectInstrument(c))}),n(1,"span",25),r(2),i(),n(3,"span",26),r(4),i()()}if(a&2){let t=o.$implicit,e=p();x("active",e.selectedInstrument===t),s(2),u(t.emoji),s(2),u(t.name)}}function F(a,o){if(a&1){let t=y();n(0,"button",27),d("click",function(){let c=b(t).$implicit,m=p();return _(m.playNote(c))}),n(1,"span",28),r(2),i(),n(3,"span",29),r(4),i()()}if(a&2){let t=o.$implicit,e=p();O("background",t.color),x("active",e.activeNote===t),s(2),u(t.emoji),s(2),u(t.name)}}function D(a,o){a&1&&(n(0,"span",34),r(1,"\u25CF Recording..."),i())}function z(a,o){a&1&&(n(0,"span",35),r(1,"\u25B6\uFE0F Playing..."),i())}function q(a,o){if(a&1&&(n(0,"div",30)(1,"span",31),r(2),i(),g(3,D,2,0,"span",32)(4,z,2,0,"span",33),i()),a&2){let t=p();s(2),h("",t.recordedNotes.length," notes recorded"),s(),l("ngIf",t.isRecording),s(),l("ngIf",t.isPlaying)}}var f=class a{constructor(o){this.router=o;this.selectedInstrument=this.instruments[0]}notes=[{name:"C",frequency:261.63,emoji:"\u{1F534}",color:"#ef4444"},{name:"D",frequency:293.66,emoji:"\u{1F7E0}",color:"#f97316"},{name:"E",frequency:329.63,emoji:"\u{1F7E1}",color:"#fbbf24"},{name:"F",frequency:349.23,emoji:"\u{1F7E2}",color:"#10b981"},{name:"G",frequency:392,emoji:"\u{1F535}",color:"#3b82f6"},{name:"A",frequency:440,emoji:"\u{1F7E3}",color:"#a855f7"},{name:"B",frequency:493.88,emoji:"\u{1F7E4}",color:"#92400e"},{name:"C2",frequency:523.25,emoji:"\u26AA",color:"#f3f4f6"}];instruments=[{name:"Piano",type:"sine",emoji:"\u{1F3B9}"},{name:"Trumpet",type:"sawtooth",emoji:"\u{1F3BA}"},{name:"Flute",type:"triangle",emoji:"\u{1FA88}"},{name:"Guitar",type:"square",emoji:"\u{1F3B8}"}];recordedNotes=[];isRecording=!1;isPlaying=!1;recordStartTime=0;selectedInstrument;activeNote=null;audioContext;ngOnInit(){this.audioContext=new(window.AudioContext||window.webkitAudioContext)}ngOnDestroy(){this.audioContext&&this.audioContext.close()}playNote(o,t=.3){this.activeNote=o;let e=this.audioContext.createOscillator(),c=this.audioContext.createGain();if(e.connect(c),c.connect(this.audioContext.destination),e.type=this.selectedInstrument.type,e.frequency.value=o.frequency,c.gain.setValueAtTime(.3,this.audioContext.currentTime),c.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),e.start(this.audioContext.currentTime),e.stop(this.audioContext.currentTime+t),this.isRecording){let m=Date.now()-this.recordStartTime;this.recordedNotes.push({note:o,time:m})}setTimeout(()=>{this.activeNote=null},t*1e3)}selectInstrument(o){this.selectedInstrument=o}startRecording(){this.isRecording=!0,this.recordedNotes=[],this.recordStartTime=Date.now()}stopRecording(){this.isRecording=!1}async playRecording(){if(!(this.recordedNotes.length===0||this.isPlaying)){this.isPlaying=!0;for(let o=0;o<this.recordedNotes.length;o++){let t=this.recordedNotes[o],e=o===0?0:t.time-this.recordedNotes[o-1].time;await this.sleep(e),this.playNote(t.note)}this.isPlaying=!1}}clearRecording(){this.recordedNotes=[],this.isRecording=!1,this.isPlaying=!1}sleep(o){return new Promise(t=>setTimeout(t,o))}async playSong(o){if(this.isPlaying)return;let e={twinkle:[this.notes[0],this.notes[0],this.notes[4],this.notes[4],this.notes[5],this.notes[5],this.notes[4]],happy:[this.notes[0],this.notes[0],this.notes[1],this.notes[0],this.notes[3],this.notes[2]],mary:[this.notes[2],this.notes[1],this.notes[0],this.notes[1],this.notes[2],this.notes[2],this.notes[2]]}[o];if(e){this.isPlaying=!0;for(let c of e)this.playNote(c),await this.sleep(500);this.isPlaying=!1}}goBack(){this.router.navigate(["/home"])}static \u0275fac=function(t){return new(t||a)(k(E))};static \u0275cmp=M({type:a,selectors:[["app-music-maker"]],decls:48,vars:12,consts:[[1,"music-maker-screen"],[1,"header"],[1,"back-btn",3,"click"],[1,"title"],[1,"header-spacer"],[1,"main-content"],[1,"instrument-section"],[1,"section-title"],[1,"instruments-grid"],["class","instrument-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"piano-section"],[1,"piano-keys"],["class","piano-key",3,"active","background","click",4,"ngFor","ngForOf"],[1,"recording-section"],[1,"recording-controls"],[1,"control-btn","record",3,"click","disabled"],[1,"control-btn","play",3,"click","disabled"],[1,"control-btn","clear",3,"click","disabled"],["class","recording-info",4,"ngIf"],[1,"songs-section"],[1,"songs-grid"],[1,"song-btn",3,"click","disabled"],[1,"song-emoji"],[1,"song-name"],[1,"instrument-btn",3,"click"],[1,"instrument-emoji"],[1,"instrument-name"],[1,"piano-key",3,"click"],[1,"key-emoji"],[1,"key-name"],[1,"recording-info"],[1,"notes-count"],["class","recording-indicator",4,"ngIf"],["class","playing-indicator",4,"ngIf"],[1,"recording-indicator"],[1,"playing-indicator"]],template:function(t,e){t&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),d("click",function(){return e.goBack()}),r(3,"\u2190 Back"),i(),n(4,"h1",3),r(5,"\u{1F3B5} Music Maker \u{1F3B5}"),i(),v(6,"div",4),i(),n(7,"div",5)(8,"div",6)(9,"h2",7),r(10,"Choose Your Instrument"),i(),n(11,"div",8),g(12,j,5,4,"button",9),i()(),n(13,"div",10)(14,"h2",7),r(15,"Play the Keys"),i(),n(16,"div",11),g(17,F,5,6,"button",12),i()(),n(18,"div",13)(19,"h2",7),r(20,"Record Your Song"),i(),n(21,"div",14)(22,"button",15),d("click",function(){return e.isRecording?e.stopRecording():e.startRecording()}),r(23),i(),n(24,"button",16),d("click",function(){return e.playRecording()}),r(25," \u25B6\uFE0F Play Recording "),i(),n(26,"button",17),d("click",function(){return e.clearRecording()}),r(27," \u{1F5D1}\uFE0F Clear "),i()(),g(28,q,5,3,"div",18),i(),n(29,"div",19)(30,"h2",7),r(31,"Play a Song"),i(),n(32,"div",20)(33,"button",21),d("click",function(){return e.playSong("twinkle")}),n(34,"span",22),r(35,"\u2B50"),i(),n(36,"span",23),r(37,"Twinkle Twinkle"),i()(),n(38,"button",21),d("click",function(){return e.playSong("happy")}),n(39,"span",22),r(40,"\u{1F382}"),i(),n(41,"span",23),r(42,"Happy Birthday"),i()(),n(43,"button",21),d("click",function(){return e.playSong("mary")}),n(44,"span",22),r(45,"\u{1F411}"),i(),n(46,"span",23),r(47,"Mary Had a Little Lamb"),i()()()()()()),t&2&&(s(12),l("ngForOf",e.instruments),s(5),l("ngForOf",e.notes),s(5),x("active",e.isRecording),l("disabled",e.isPlaying),s(),h(" ",e.isRecording?"\u23F9\uFE0F Stop Recording":"\u23FA\uFE0F Start Recording"," "),s(),l("disabled",e.recordedNotes.length===0||e.isRecording||e.isPlaying),s(2),l("disabled",e.recordedNotes.length===0||e.isRecording||e.isPlaying),s(2),l("ngIf",e.recordedNotes.length>0),s(5),l("disabled",e.isPlaying||e.isRecording),s(5),l("disabled",e.isPlaying||e.isRecording),s(5),l("disabled",e.isPlaying||e.isRecording))},dependencies:[R,w,S],styles:['.music-maker-screen[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#ec4899,#8b5cf6,#3b82f6);padding:20px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:30px;background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);padding:20px;border-radius:20px}.back-btn[_ngcontent-%COMP%]{background:#fff;color:#ec4899;padding:12px 24px;border:none;border-radius:50px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .3s;box-shadow:0 4px 15px #0003}.back-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.title[_ngcontent-%COMP%]{font-size:clamp(2rem,6vw,3rem);color:#fff;text-shadow:3px 3px 6px rgba(0,0,0,.3);margin:0;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.header-spacer[_ngcontent-%COMP%]{width:120px}.main-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.section-title[_ngcontent-%COMP%]{color:#fff;font-size:clamp(1.5rem,4vw,2rem);text-shadow:2px 2px 4px rgba(0,0,0,.3);margin-bottom:20px;text-align:center}.instrument-section[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:clamp(20px,4vw,40px);margin-bottom:30px;box-shadow:0 10px 40px #0003}.instruments-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px}.instrument-btn[_ngcontent-%COMP%]{background:#f3f4f6;border:3px solid transparent;border-radius:20px;padding:20px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;align-items:center;gap:10px}.instrument-btn[_ngcontent-%COMP%]:hover{background:#ddd6fe;transform:translateY(-5px)}.instrument-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ec4899,#8b5cf6);border-color:#3b82f6;color:#fff}.instrument-emoji[_ngcontent-%COMP%]{font-size:3rem}.instrument-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.instrument-btn.active[_ngcontent-%COMP%]   .instrument-name[_ngcontent-%COMP%]{color:#fff}.piano-section[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:clamp(20px,4vw,40px);margin-bottom:30px;box-shadow:0 10px 40px #0003}.piano-keys[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:12px}.piano-key[_ngcontent-%COMP%]{aspect-ratio:1;border:4px solid white;border-radius:20px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;box-shadow:0 5px 20px #0003;position:relative;overflow:hidden}.piano-key[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:#fff0;transition:background .2s}.piano-key[_ngcontent-%COMP%]:hover:before{background:#ffffff4d}.piano-key[_ngcontent-%COMP%]:active, .piano-key.active[_ngcontent-%COMP%]{transform:scale(.95);box-shadow:0 2px 10px #0000004d}.piano-key.active[_ngcontent-%COMP%]:before{background:#ffffff80;animation:_ngcontent-%COMP%_ripple .6s ease-out}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(0);opacity:1}to{transform:scale(2);opacity:0}}.key-emoji[_ngcontent-%COMP%]{font-size:clamp(2.5rem,6vw,4rem);position:relative;z-index:1}.key-name[_ngcontent-%COMP%]{font-size:clamp(1.2rem,3vw,1.8rem);font-weight:700;color:#fff;text-shadow:1px 1px 3px rgba(0,0,0,.3);position:relative;z-index:1}.recording-section[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:clamp(20px,4vw,40px);margin-bottom:30px;box-shadow:0 10px 40px #0003}.recording-controls[_ngcontent-%COMP%]{display:flex;gap:15px;justify-content:center;flex-wrap:wrap;margin-bottom:20px}.control-btn[_ngcontent-%COMP%]{font-size:clamp(1.1rem,2.5vw,1.4rem);font-weight:700;padding:clamp(12px,3vw,18px) clamp(25px,5vw,40px);border:none;border-radius:50px;cursor:pointer;transition:all .3s;box-shadow:0 5px 20px #0003;color:#fff}.control-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:scale(1.05);box-shadow:0 8px 25px #0000004d}.control-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.control-btn.record[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626)}.control-btn.record.active[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.7}}.control-btn.play[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669)}.control-btn.clear[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6b7280,#4b5563)}.recording-info[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:30px;flex-wrap:wrap;font-size:clamp(1rem,2.5vw,1.3rem);color:#666}.notes-count[_ngcontent-%COMP%]{background:#ddd6fe;padding:10px 20px;border-radius:50px;font-weight:700}.recording-indicator[_ngcontent-%COMP%]{color:#ef4444;font-weight:700;animation:_ngcontent-%COMP%_blink 1s infinite}.playing-indicator[_ngcontent-%COMP%]{color:#10b981;font-weight:700;animation:_ngcontent-%COMP%_pulse 1s infinite}.songs-section[_ngcontent-%COMP%]{background:#fff;border-radius:25px;padding:clamp(20px,4vw,40px);box-shadow:0 10px 40px #0003}.songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px}.song-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#fbbf24,#f59e0b);border:none;border-radius:20px;padding:30px 20px;cursor:pointer;transition:all .3s;display:flex;flex-direction:column;align-items:center;gap:10px;box-shadow:0 5px 20px #0003;color:#fff}.song-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-5px);box-shadow:0 8px 30px #0000004d}.song-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.song-emoji[_ngcontent-%COMP%]{font-size:3rem}.song-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-align:center}@media(max-width:768px){.header[_ngcontent-%COMP%]{flex-wrap:wrap;gap:10px}.header-spacer[_ngcontent-%COMP%]{display:none}.piano-keys[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.recording-controls[_ngcontent-%COMP%]{flex-direction:column}.control-btn[_ngcontent-%COMP%]{width:100%}}@media(max-width:480px){.instruments-grid[_ngcontent-%COMP%], .piano-keys[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.songs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}']})};var B=[{path:"",component:f}],T=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=P({type:a});static \u0275inj=C({imports:[N.forChild(B),f]})};export{T as MusicMakerModule};
